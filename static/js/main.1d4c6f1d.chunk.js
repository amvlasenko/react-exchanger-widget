(this["webpackJsonpreact-exchanger"]=this["webpackJsonpreact-exchanger"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(9),s=n.n(c),i=(n(14),n(15),n(2)),o=n(3),u=n(4),h=n(6),l=n(5),m=n(8),g=n(0);function d(e){var t=e.ticker,n=e.name,a=e.image,r=e.setCurrent,c={backgroundImage:"url("+a+")"};return Object(g.jsx)("div",{className:"exchange-currency",children:Object(g.jsxs)("button",{style:c,onClick:function(){r(n,a)},"aria-label":n,children:[Object(g.jsxs)("span",{className:"cryptoTicker",children:[t," "]}),Object(g.jsx)("span",{className:"cryptoName",children:n})]})})}function p(e){return Object(g.jsx)("div",{className:"currencies",children:e.currencies.filter((function(t){return t.name.includes(e.searchString)||t.ticker.includes(e.searchString)})).map((function(t){return Object(g.jsx)(d,Object(m.a)(Object(m.a)({},t),{},{setCurrent:e.setCurrent,getMinAmount:e.getMinAmount,getEstimatedAmount:e.getEstimatedAmount,name:t.name}),t.name)}))})}var j=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={search:""},e.handleKey=function(t){e.props.searchCurrencies(e.state.search)},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return Object(g.jsx)("input",{type:"search",className:"user-search",placeholder:"Search",value:this.state.search,onChange:function(t){return e.setState({search:t.target.value})},onKeyDown:this.handleKey,"aria-label":"Enter the name or ticker of the currency to search"})}}]),n}(r.a.Component),b="bf09c6abbb5ec5bbbd0e210ad018ab010d460dc474c2e7361ccd27378e874a05",x=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={currencies:[],exchangeFrom:[{ticker:"btc",image:"https://changenow.io/images/sprite/currencies/btc.svg"}],exchangeTo:[{ticker:"eth",image:"https://changenow.io/images/sprite/currencies/eth.svg"}],minimalAmount:"",estimatedAmount:"",inputFromValue:"",inputToValue:"",searchFromIsOpened:!1,searchToIsOpened:!1,searchFromStringValue:"",searchToStringValue:"",exchangeError:!1,exchangeErrorValue:""},e.getMinAmount=function(){var t=Object(i.a)(e.state.exchangeFrom,1)[0],n=Object(i.a)(e.state.exchangeTo,1)[0];fetch("https://api.changenow.io/v1/min-amount/".concat(t.ticker,"_").concat(n.ticker,"?api_key=").concat(b)).then((function(e){return e.json()})).then((function(t){return e.setState({minimalAmount:t})})).then((function(){return e.state.minimalAmount.error?e.setState({inputToValue:"-",exchangeError:!0,exchangeErrorValue:e.state.minimalAmount.error,inputFromValue:"0"}):e.setState({exchangeError:!1,exchangeErrorValue:"",inputFromValue:e.state.minimalAmount.minAmount})})).then((function(){return fetch("https://api.changenow.io/v1/exchange-amount/".concat(e.state.inputFromValue,"/").concat(t.ticker,"_").concat(n.ticker,"?api_key=").concat(b)).then((function(e){return e.json()})).then((function(t){return e.setState({estimatedAmount:t})})).then((function(){return e.setState({inputToValue:e.state.estimatedAmount.estimatedAmount})}))})).catch((function(e){return console.log("error",e)}))},e.getEstimatedAmount=function(){var t=Object(i.a)(e.state.exchangeFrom,1)[0],n=Object(i.a)(e.state.exchangeTo,1)[0];fetch("https://api.changenow.io/v1/exchange-amount/".concat(e.state.inputFromValue,"/").concat(t.ticker,"_").concat(n.ticker,"?api_key=").concat(b)).then((function(e){return e.json()})).then((function(t){return e.setState({estimatedAmount:t})})).then((function(){return e.state.estimatedAmount.estimatedAmount?e.setState({inputToValue:e.state.estimatedAmount.estimatedAmount,exchangeError:!1,exchangeErrorValue:""}):e.setState({inputToValue:"-",exchangeError:!0,exchangeErrorValue:e.state.estimatedAmount.error})})).catch((function(e){return console.log("error",e)}))},e.userValueExchange=function(t){e.setState((function(){return{inputFromValue:t.target.value}}),(function(){e.getEstimatedAmount()}))},e.setFrom=function(t,n){e.setState((function(){return{exchangeFrom:e.state.currencies.filter((function(e){return e.name===t&&e.image===n})),searchFromIsOpened:!1,searchFromStringValue:""}}),(function(){return e.getMinAmount()}))},e.setTo=function(t,n){e.setState((function(){return{exchangeTo:e.state.currencies.filter((function(e){return e.name===t&&e.image===n})),searchToIsOpened:!1,searchToStringValue:""}}),(function(){return e.getMinAmount()}))},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("https://api.changenow.io/v1/currencies?active=true&fixedRate=true").then((function(e){return e.json()})).then((function(t){return e.setState({currencies:t})})).catch((function(e){return console.log("error",e)})),fetch("https://api.changenow.io/v1/min-amount/btc_eth?api_key=".concat(b)).then((function(e){return e.json()})).then((function(t){return e.setState({minimalAmount:t.minAmount})})).then((function(){return e.setState({inputFromValue:e.state.minimalAmount})})).then((function(){return fetch("https://api.changenow.io/v1/exchange-amount/".concat(e.state.inputFromValue,"/btc_eth?api_key=").concat(b)).then((function(e){return e.json()})).then((function(t){return e.setState({estimatedAmount:t})})).then((function(){return e.setState({inputToValue:e.state.estimatedAmount.estimatedAmount})}))})).catch((function(e){return console.log("error",e)}))}},{key:"render",value:function(){var e=this,t=Object(i.a)(this.state.exchangeFrom,1)[0],n=Object(i.a)(this.state.exchangeTo,1)[0],a={backgroundImage:"url("+t.image+")"},r={backgroundImage:"url("+n.image+")"},c="hidden";return c=this.state.exchangeError?"error":"hidden",Object(g.jsx)("div",{className:"App",children:Object(g.jsxs)("div",{className:"exchangeContainer",children:[Object(g.jsx)("div",{className:"exchangeFrom",children:Object(g.jsxs)("div",{className:"controls",children:[this.state.searchFromIsOpened?Object(g.jsx)(j,{searchCurrencies:function(t){return e.setState({searchFromStringValue:t})}}):Object(g.jsx)("input",{type:"text",className:"inputValue",onChange:this.userValueExchange,value:this.state.inputFromValue,"aria-label":"Enter the exchange amount"}),this.state.searchFromIsOpened?null:Object(g.jsx)("button",{className:"currentFrom",style:a,onClick:function(t){e.setState({searchFromIsOpened:!e.state.searchFromIsOpened})},"aria-label":"Select currency to exchange",children:t.ticker.slice(0,4)}),this.state.searchFromIsOpened?Object(g.jsx)(p,{searchString:this.state.searchFromStringValue,currencies:this.state.currencies,setCurrent:this.setFrom,getMinAmount:this.getMinAmount}):null]})}),Object(g.jsx)("button",{className:"swapTickers","aria-label":"Swapping tickers, not available now"}),Object(g.jsx)("div",{className:"exchangeTo",children:Object(g.jsxs)("div",{className:"controls",children:[this.state.searchToIsOpened?Object(g.jsx)(j,{searchCurrencies:function(t){return e.setState({searchToStringValue:t})}}):Object(g.jsx)("input",{type:"text",className:"inputValue",onChange:function(t){return e.setState({inputToValue:t.target.value})},value:this.state.inputToValue,"aria-label":"You will get"}),this.state.searchToIsOpened?null:Object(g.jsx)("button",{className:"currentTo",style:r,onClick:function(t){e.setState({searchToIsOpened:!e.state.searchToIsOpened})},"aria-label":"Select currency to exchange",children:n.ticker.slice(0,4)}),this.state.searchToIsOpened?Object(g.jsx)(p,{searchString:this.state.searchToStringValue,currencies:this.state.currencies,setCurrent:this.setTo,getMinAmount:this.getMinAmount}):null]})}),Object(g.jsxs)("div",{className:"goExchange",children:[Object(g.jsxs)("label",{htmlFor:"exchangeAddress",children:["Your"," ",n.name?n.name:"Ethereum"," ","address",Object(g.jsx)("input",{type:"text",className:"exchangeAddress",id:"exchangeAddress","aria-label":"Enter exchange address"})]}),Object(g.jsxs)("button",{className:"exchangeSubmit","aria-label":"Make an exchange",children:["Exchange",Object(g.jsx)("div",{className:c,children:Object(g.jsx)("span",{children:"deposit_too_small"===this.state.exchangeErrorValue?"Deposit too small":"pair_is_inactive"===this.state.exchangeErrorValue?"This pair is disabled now":"Enter deposit"})})]})]})]})})}}]),n}(r.a.Component);var f=function(){return Object(g.jsxs)("div",{className:"content",children:[Object(g.jsx)("h1",{children:"Crypto Exchange"}),Object(g.jsx)("p",{children:"Exchange fast and easy"}),Object(g.jsx)(x,{})]})};s.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(f,{})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.1d4c6f1d.chunk.js.map