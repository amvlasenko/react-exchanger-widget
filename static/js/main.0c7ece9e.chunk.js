(this["webpackJsonpreact-exchanger"]=this["webpackJsonpreact-exchanger"]||[]).push([[0],{24:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(9),s=n.n(r),i=n(7),u=n(2),o="FETCH_CURRENCIES",l="FETCH_MINIMAL_AMOUNT",h="FETCH_ESTIMATED_AMOUNT",j="SET_EXCHANGE_FROM",b="SET_EXCHANGE_TO",d={currencies:[]},m={estimatedAmount:""},p={minimalAmount:0},O={exchangeFrom:{ticker:"btc",image:"https://changenow.io/images/sprite/currencies/btc.svg"},exchangeTo:{ticker:"eth",image:"https://changenow.io/images/sprite/currencies/eth.svg"}},f=Object(i.b)({currencies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:return Object(u.a)(Object(u.a)({},e),{},{currencies:t.payload});default:return e}},minimalAmount:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(u.a)(Object(u.a)({},e),{},{minimalAmount:t.payload});default:return e}},setExchange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(u.a)(Object(u.a)({},e),{},{exchangeFrom:t.payload});case b:return Object(u.a)(Object(u.a)({},e),{},{exchangeTo:t.payload});default:return e}},estimatedAmount:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(u.a)(Object(u.a)({},e),{},{estimatedAmount:t.payload});default:return e}}}),g=(n(24),n(16)),x=n(5),v=n(4),y=n(3),E=n.n(y),k=n(6),A=n(11),w=n(12),S=Object({NODE_ENV:"production",PUBLIC_URL:"/react-exchanger-widget",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_KEY,N=new(function(){function e(){Object(A.a)(this,e)}return Object(w.a)(e,[{key:"getCurrenies",value:function(){var e=Object(k.a)(E.a.mark((function e(){var t,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.changenow.io/v1/currencies?active=true&fixedRate=true");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getMinAmount",value:function(){var e=Object(k.a)(E.a.mark((function e(t,n){var c,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.changenow.io/v1/min-amount/".concat(t,"_").concat(n,"?api_key=").concat(S));case 2:return c=e.sent,e.next=5,c.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getEstimatedAmount",value:function(){var e=Object(k.a)(E.a.mark((function e(t,n,c){var a,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.changenow.io/v1/exchange-amount/".concat(t,"/").concat(n,"_").concat(c,"?api_key=").concat(S));case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}()}]),e}());function _(e,t){return function(){var n=Object(k.a)(E.a.mark((function n(c){var a;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N.getMinAmount(e,t);case 2:a=n.sent,c({type:l,payload:a});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}function C(e){return function(t){t({type:j,payload:e})}}function T(e){return function(t){t({type:b,payload:e})}}var F=n(1);function I(e){var t=e.ticker,n=e.name,c=e.image,a=e.setExchange,r={backgroundImage:"url("+c+")"};return Object(F.jsx)("div",{className:"exchange-currency",children:Object(F.jsxs)("button",{style:r,onClick:function(){a(n,c)},"aria-label":n,children:[Object(F.jsxs)("span",{className:"cryptoTicker",children:[t," "]}),Object(F.jsx)("span",{className:"cryptoName",children:n})]})})}function M(e){return Object(F.jsx)("div",{className:"currencies",children:e.currencies.filter((function(t){return t.name.includes(e.searchString)||t.ticker.includes(e.searchString)})).map((function(t){return Object(F.jsx)(I,Object(u.a)(Object(u.a)({},t),{},{name:t.name,setExchange:e.setExchange}),t.name)}))})}var R=n(19),H=n(18),D=function(e){Object(R.a)(n,e);var t=Object(H.a)(n);function n(){var e;Object(A.a)(this,n);for(var c=arguments.length,a=new Array(c),r=0;r<c;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={search:""},e.handleKey=function(t){e.props.searchCurrencies(e.state.search)},e}return Object(w.a)(n,[{key:"render",value:function(){var e=this;return Object(F.jsx)("input",{type:"search",className:"user-search",placeholder:"Search",value:this.state.search,onChange:function(t){return e.setState({search:t.target.value})},onKeyDown:this.handleKey,"aria-label":"Enter the name or ticker of the currency to search"})}}]),n}(a.a.Component);function K(){var e=Object(v.b)(),t=Object(v.c)((function(e){return e.currencies.currencies})),n=Object(v.c)((function(e){return e.setExchange.exchangeFrom})),a=Object(v.c)((function(e){return e.setExchange.exchangeTo})),r=Object(v.c)((function(e){return e.minimalAmount.minimalAmount})),s=Object(v.c)((function(e){return e.estimatedAmount.estimatedAmount})),i=Object(c.useState)(""),u=Object(x.a)(i,2),l=u[0],j=u[1],b=Object(c.useState)(""),d=Object(x.a)(b,2),m=d[0],p=d[1],O=Object(c.useState)(!1),f=Object(x.a)(O,2),y=f[0],A=f[1],w=Object(c.useState)(!1),S=Object(x.a)(w,2),I=S[0],R=S[1],H=Object(c.useState)(""),K=Object(x.a)(H,2),P=K[0],U=K[1],L=Object(c.useState)(""),V=Object(x.a)(L,2),W=V[0],Y=V[1],B=Object(c.useState)(!1),G=Object(x.a)(B,2),J=G[0],X=G[1],q=Object(c.useState)(""),z=Object(x.a)(q,2),Q=z[0],Z=z[1],$=Object(c.useCallback)((function(){e(function(){var e=Object(k.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.getCurrenies();case 2:n=e.sent,t({type:o,payload:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(_(n.ticker,a.ticker))}),[e,n,a]);Object(c.useEffect)((function(){$()}),[$]),Object(c.useEffect)((function(){e(function(e,t,n){return function(){var c=Object(k.a)(E.a.mark((function c(a){var r;return E.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,N.getEstimatedAmount(e,t,n);case 2:r=c.sent,a({type:h,payload:r});case 4:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}(l,n.ticker,a.ticker))}),[l]),Object(c.useEffect)((function(){e(_(n.ticker,a.ticker))}),[e,n,a]),Object(c.useEffect)((function(){X(!!r.error),Z(r.error?r.error:""),j(r.error?"0":r.minAmount)}),[r]),Object(c.useEffect)((function(){X(!s.estimatedAmount),Z(s.estimatedAmount?"":s.error),p(s.estimatedAmount?s.estimatedAmount:"-")}),[s]);var ee={backgroundImage:"url("+n.image+")"},te={backgroundImage:"url("+a.image+")"},ne="hidden";return ne=J?"error":"hidden",Object(F.jsx)("div",{className:"App",children:Object(F.jsxs)("div",{className:"exchangeContainer",children:[Object(F.jsx)("div",{className:"exchangeFrom",children:Object(F.jsxs)("div",{className:"controls",children:[y?Object(F.jsx)(D,{searchCurrencies:function(e){return U(e.target.value)}}):Object(F.jsx)("input",{type:"text",className:"inputValue",onChange:function(e){j(e.target.value),function(e,t){var n,c,a=!1}(N.getEstimatedAmount(l,n.ticker,a.ticker))},value:l,"aria-label":"Enter the exchange amount"}),y?null:Object(F.jsx)("button",{className:"currentFrom",style:ee,onClick:function(e){A(!y)},"aria-label":"Select currency to exchange",children:n.ticker.slice(0,4)}),y?Object(F.jsx)(M,{searchString:P,currencies:t,setExchange:function(n,c){e(C.apply(void 0,Object(g.a)(t.filter((function(e){return e.name===n&&e.image===c}))))),A(!1),U("")}}):null]})}),Object(F.jsx)("button",{className:"swapTickers","aria-label":"Swapping tickers, not available now"}),Object(F.jsx)("div",{className:"exchangeTo",children:Object(F.jsxs)("div",{className:"controls",children:[I?Object(F.jsx)(D,{searchCurrencies:function(e){return Y(e.target.value)}}):Object(F.jsx)("input",{type:"text",className:"inputValue",onChange:function(e){p(e.target.value)},value:m,"aria-label":"You will get"}),I?null:Object(F.jsx)("button",{className:"currentTo",style:te,onClick:function(e){R(!I)},"aria-label":"Select currency to exchange",children:a.ticker.slice(0,4)}),I?Object(F.jsx)(M,{searchString:W,currencies:t,setExchange:function(n,c){e(T.apply(void 0,Object(g.a)(t.filter((function(e){return e.name===n&&e.image===c}))))),R(!1),Y("")}}):null]})}),Object(F.jsxs)("div",{className:"goExchange",children:[Object(F.jsxs)("label",{htmlFor:"exchangeAddress",children:["Your ",a.name?a.name:"Ethereum"," address",Object(F.jsx)("input",{type:"text",className:"exchangeAddress",id:"exchangeAddress","aria-label":"Enter exchange address"})]}),Object(F.jsxs)("button",{className:"exchangeSubmit","aria-label":"Make an exchange",children:["Exchange",Object(F.jsx)("div",{className:ne,children:Object(F.jsx)("span",{children:"deposit_too_small"===Q?"Deposit too small":"pair_is_inactive"===Q?"This pair is disabled now":"Enter deposit"})})]})]})]})})}var P=function(){return Object(F.jsxs)("div",{className:"content",children:[Object(F.jsx)("h1",{children:"Crypto Exchange"}),Object(F.jsx)("p",{children:"Exchange fast and easy"}),Object(F.jsx)(K,{})]})},U=n(17),L=Object(i.d)(f,Object(i.c)(Object(i.a)(U.a)));s.a.render(Object(F.jsx)(v.a,{store:L,children:Object(F.jsx)(P,{})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.0c7ece9e.chunk.js.map