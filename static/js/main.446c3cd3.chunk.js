(this["webpackJsonpreact-exchanger"]=this["webpackJsonpreact-exchanger"]||[]).push([[0],{22:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(9),a=n.n(r),i=n(7),s=n(2),u="FETCH_CURRENCIES",o="FETCH_MINIMAL_AMOUNT",l="FETCH_ESTIMATED_AMOUNT",h="SET_EXCHANGE_FROM",b="SET_EXCHANGE_TO",j={currencies:[]},d={estimatedAmount:""},m={minimalAmount:0},f={exchangeFrom:{ticker:"btc",image:"https://changenow.io/images/sprite/currencies/btc.svg"},exchangeTo:{ticker:"eth",image:"https://changenow.io/images/sprite/currencies/eth.svg"}},p=Object(i.b)({currencies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(s.a)(Object(s.a)({},e),{},{currencies:t.payload});default:return e}},minimalAmount:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:return Object(s.a)(Object(s.a)({},e),{},{minimalAmount:t.payload});default:return e}},setExchange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(s.a)(Object(s.a)({},e),{},{exchangeFrom:t.payload});case b:return Object(s.a)(Object(s.a)({},e),{},{exchangeTo:t.payload});default:return e}},estimatedAmount:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(s.a)(Object(s.a)({},e),{},{estimatedAmount:t.payload});default:return e}}}),O=(n(22),n(14)),x=n(4),g=n(5),v=n(3),y=n.n(v),E=n(6),k=n(15),w=n(16),A="bf09c6abbb5ec5bbbd0e210ad018ab010d460dc474c2e7361ccd27378e874a05",N=new(function(){function e(){Object(k.a)(this,e)}return Object(w.a)(e,[{key:"getCurrencies",value:function(){var e=Object(E.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.changenow.io/v1/currencies?active=true&fixedRate=true").then((function(e){return e.json()})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getMinAmount",value:function(){var e=Object(E.a)(y.a.mark((function e(t,n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.changenow.io/v1/min-amount/".concat(t,"_").concat(n,"?api_key=").concat(A)).then((function(e){return e.json()})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getEstimatedAmount",value:function(){var e=Object(E.a)(y.a.mark((function e(t,n,c){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.changenow.io/v1/exchange-amount/".concat(t,"/").concat(n,"_").concat(c,"?api_key=").concat(A)).then((function(e){return e.json()})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}()}]),e}());function S(e,t){return function(){var n=Object(E.a)(y.a.mark((function n(c){var r;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N.getMinAmount(e,t);case 2:r=n.sent,c({type:o,payload:r});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}function C(e){return function(t){t({type:h,payload:e})}}function T(e){return function(t){t({type:b,payload:e})}}var _=n(1),F=function(e){var t=e.ticker,n=e.name,c=e.image,r=e.setExchange,a={backgroundImage:"url("+c+")"};return Object(_.jsx)("div",{className:"exchange-currency",children:Object(_.jsxs)("button",{style:a,onClick:function(){r(n,c)},"aria-label":n,children:[Object(_.jsxs)("span",{className:"cryptoTicker",children:[t," "]}),Object(_.jsx)("span",{className:"cryptoName",children:n})]})})},M=function(e){var t=e.searchString,n=e.currencies,r=e.setExchange,a=Object(c.useState)(n),i=Object(x.a)(a,2),u=i[0],o=i[1];return Object(c.useEffect)((function(){o(n.filter((function(e){return e.name.toString().toLowerCase().includes(t.toString().toLowerCase())||e.ticker.toString().toLowerCase().includes(t.toString().toLowerCase())})))}),[t]),Object(_.jsx)("div",{className:"currencies",children:u.length>0?u.map((function(e){return Object(_.jsx)(F,Object(s.a)(Object(s.a)({},e),{},{name:e.name,setExchange:r}),e.ticker)})):Object(_.jsx)("div",{className:"exchange-currency empty",children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})})},I=function(e){var t=e.searchCurrencies,n=e.setSearch,r=e.currencies,a=e.exchangeContext,i=Object(c.useState)(""),s=Object(x.a)(i,2),u=s[0],o=s[1],l=Object(c.useRef)(null);return Object(c.useEffect)((function(){function e(t){l.current?l.current.contains(t.target)||n(!1):document.removeEventListener("click",e)}return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}}),[]),Object(_.jsxs)("div",{className:"controls",ref:l,children:[Object(_.jsx)("input",{autoFocus:!0,type:"search",className:"user-search",placeholder:"Search",value:u||"",onChange:function(e){return function(e){e.preventDefault(),o(e.target.value),t(u)}(e)},"aria-label":"Enter the name or ticker of the currency to search"}),Object(_.jsx)(M,{searchString:u,currencies:r,setExchange:a})]})},L=function(e){var t=e.exchangeTo,n=e.exchangeError,c=e.exchangeErrorValue;return Object(_.jsxs)("div",{className:"goExchange",children:[Object(_.jsxs)("label",{htmlFor:"exchangeAddress",children:["Your ",t||"Ethereum"," address",Object(_.jsx)("input",{type:"text",className:"exchangeAddress",id:"exchangeAddress","aria-label":"Enter exchange address"})]}),Object(_.jsxs)("button",{className:"exchangeSubmit","aria-label":"Make an exchange",children:["Exchange",Object(_.jsx)("div",{className:n,children:Object(_.jsx)("span",{children:"deposit_too_small"===c?"Deposit too small":"pair_is_inactive"===c?"This pair is disabled now":"Enter deposit"})})]})]})};var H=function(){var e=Object(g.b)(),t=Object(g.c)((function(e){return e.currencies.currencies})),n=Object(g.c)((function(e){return e.setExchange.exchangeFrom})),r=Object(g.c)((function(e){return e.setExchange.exchangeTo})),a=Object(g.c)((function(e){return e.minimalAmount.minimalAmount})),i=Object(g.c)((function(e){return e.estimatedAmount.estimatedAmount})),s=Object(c.useState)(""),o=Object(x.a)(s,2),h=o[0],b=o[1],j=Object(c.useState)(""),d=Object(x.a)(j,2),m=d[0],f=d[1],p=Object(c.useState)(!1),v=Object(x.a)(p,2),k=v[0],w=v[1],A=Object(c.useState)(!1),F=Object(x.a)(A,2),M=F[0],H=F[1],R=Object(c.useState)(""),V=Object(x.a)(R,2),D=(V[0],V[1]),U=Object(c.useState)(""),G=Object(x.a)(U,2),J=(G[0],G[1]),X=Object(c.useState)(!1),B=Object(x.a)(X,2),Y=B[0],q=B[1],z=Object(c.useState)(""),K=Object(x.a)(z,2),P=K[0],Q=K[1],W=Object(c.useCallback)((function(){e(function(){var e=Object(E.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.getCurrencies();case 2:n=e.sent,t({type:u,payload:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(S(n.ticker,r.ticker))}),[e,n,r]);Object(c.useEffect)((function(){W()}),[W]),Object(c.useEffect)((function(){h&&e(function(e,t,n){return function(){var c=Object(E.a)(y.a.mark((function c(r){var a;return y.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,N.getEstimatedAmount(e,t,n);case 2:a=c.sent,r({type:l,payload:a});case 4:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}(h,n.ticker,r.ticker))}),[h]),Object(c.useEffect)((function(){e(S(n.ticker,r.ticker))}),[e,n,r]),Object(c.useEffect)((function(){q(!!a.error),Q(a.error?a.error:""),b(a.error?0:a.minAmount)}),[a]),Object(c.useEffect)((function(){q(!i.estimatedAmount),Q(i.estimatedAmount?"":i.error),f(i.estimatedAmount?i.estimatedAmount:"-")}),[i]);var Z=function(e){b(e.target.value),function(e,t){var n,c,r=!1}(N.getEstimatedAmount(h,n.ticker,r.ticker))},$={backgroundImage:"url("+n.image+")"},ee={backgroundImage:"url("+r.image+")"},te="hidden";return te=Y?"error":"hidden",Object(_.jsx)("div",{className:"App",children:Object(_.jsxs)("div",{className:"exchangeContainer",children:[Object(_.jsx)("div",{className:"exchangeFrom",children:k?Object(_.jsx)(I,{searchCurrencies:D,setSearch:w,currencies:t,exchangeContext:function(n,c){e(C.apply(void 0,Object(O.a)(t.filter((function(e){return e.name===n&&e.image===c}))))),w(!1),D("")}}):Object(_.jsxs)("div",{className:"controls",children:[Object(_.jsx)("input",{type:"text",className:"inputValue",onChange:Z,value:h||"","aria-label":"Enter the exchange amount"}),Object(_.jsx)("button",{className:"currentFrom",style:$,onClick:function(e){w(!k)},"aria-label":"Select currency to exchange",children:n.ticker.slice(0,4)})]})}),Object(_.jsx)("button",{className:"swapTickers","aria-label":"Swap tickers, not available now",title:"Swap tickers, not available now",disabled:!0}),Object(_.jsx)("div",{className:"exchangeTo",children:M?Object(_.jsx)(I,{searchCurrencies:J,setSearch:H,currencies:t,exchangeContext:function(n,c){e(T.apply(void 0,Object(O.a)(t.filter((function(e){return e.name===n&&e.image===c}))))),H(!1),J("")}}):Object(_.jsxs)("div",{className:"controls",children:[Object(_.jsx)("input",{type:"text",className:"inputValue",onChange:Z,value:m||"","aria-label":"Enter the exchange amount"}),Object(_.jsx)("button",{className:"currentFrom",style:ee,onClick:function(e){H(!k)},"aria-label":"Select currency to exchange",children:r.ticker.slice(0,4)})]})}),Object(_.jsx)(L,{exchangeTo:r.name,exchangeError:te,exchangeErrorValue:P})]})})},R=function(){return Object(_.jsxs)("div",{className:"content",children:[Object(_.jsx)("h1",{children:"Crypto Exchange"}),Object(_.jsx)("p",{children:"Exchange fast and easy"}),Object(_.jsx)(H,{})]})},V=n(17),D=Object(i.d)(p,Object(i.c)(Object(i.a)(V.a)));a.a.render(Object(_.jsx)(g.a,{store:D,children:Object(_.jsx)(R,{})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.446c3cd3.chunk.js.map